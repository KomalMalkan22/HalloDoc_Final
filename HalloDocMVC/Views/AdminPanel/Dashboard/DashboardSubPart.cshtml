@using HalloDocMVC.DBEntity.ViewModels;
@using static HalloDocMVC.DBEntity.ViewModels.AdminPanel.Constant;
@model HalloDocMVC.DBEntity.ViewModels.AdminPanel.PaginationModel;

<form id="filterForm" data-ajax="true" data-ajax-method="post" data-ajax-mode="replace" data-ajax-update="#SearchResult"
      asp-action="SearchResult" asp-controller="Dashboard" novalidate="novalidate">
    <div class="mx-sm-1 mx-md-2 mt-0 bg-light">
        <!--Status of requests-->
        <div class="row mb-3 t-tab" style="--bs-gutter-x: 0rem;">
            <div class="col-lg-2 col-4 position-relative">
                <button type="submit" name="Status" value="1" class="btn text-start shadow-none w-100">
                    <div class="p-1 rounded new ps-2 pt-3 thumbnail a-new @{if(CV.CurrentStatus()=="1"){@Html.Raw("activeTab")}}">
                        <div class="d-inline-flex fw-bold">
                            <div class="d-none d-md-block">
                                <div class="img_1">
                                    <img class="requestTypeIcon d-flex align-self-center me-2" src="~/images/new.png" />
                                </div>
                                <div class="img_2">
                                    <img class="requestTypeIcon d-flex align-self-center me-2" src="~/images/new_active.png" />
                                </div>
                            </div>
                            NEW
                        </div>
                        <div class="mt-2">
                            <span class="h4 fw-bold">@Model.NewRequest</span>
                        </div>
                    </div>
                </button>
            </div>

            <div class="col-lg-2 col-4 position-relative">
                <button type="submit" name="Status" value="2" class="btn text-start shadow-none w-100">
                    <div class="p-1 rounded pending ps-2 pt-3 thumbnail a-pending @{if(CV.CurrentStatus()=="2"){@Html.Raw("activeTab")}}">
                        <div class="d-inline-flex fw-bold">
                            <div class="d-none d-md-block">
                                <div class="img_1">
                                    <img class="requestTypeIcon d-flex align-self-center me-2" src="~/images/pending.png" />
                                </div>
                                <div class="img_2">
                                    <img class="requestTypeIcon d-flex align-self-center me-2" src="~/images/pending_active.png" />
                                </div>
                            </div>
                            PENDING
                        </div>
                        <div class="mt-2">
                            <span class="h4 fw-bold">@Model.PendingRequest</span>
                        </div>
                    </div>
                </button>
            </div>

            <div class="col-lg-2 col-4 position-relative">
                <button type="submit" name="Status" value="4,5" class="btn text-start shadow-none w-100">
                    <div class="p-1 rounded active ps-2 pt-3 thumbnail a-active @{if(CV.CurrentStatus()=="4,5"){@Html.Raw("activeTab")}}">
                        <div class="d-inline-flex fw-bold">
                            <div class="d-none d-md-block">
                                <div class="img_1">
                                    <img class="requestTypeIcon d-flex align-self-center me-2" src="~/images/active.png" />
                                </div>
                                <div class="img_2">
                                    <img class="requestTypeIcon d-flex align-self-center me-2" src="~/images/active_active.png" />
                                </div>
                            </div>
                            ACTIVE
                        </div>
                        <div class="mt-2">
                            <span class="h4 fw-bold">@Model.ActiveRequest</span>
                        </div>
                    </div>
                </button>

            </div>

            <div class="col-lg-2 col-4 position-relative">
                <button type="submit" name="Status" value="6" class="btn text-start shadow-none w-100">
                    <div class="p-1 rounded conclude ps-2 pt-3 thumbnail a-conclude @{if(CV.CurrentStatus()=="6"){@Html.Raw("activeTab")}}">
                        <div class="d-inline-flex fw-bold">
                            <div class="d-none d-md-block">
                                <div class="img_1">
                                    <img class="requestTypeIcon d-flex align-self-center me-2" src="~/images/conclude.png" />
                                </div>
                                <div class="img_2">
                                    <img class="requestTypeIcon d-flex align-self-center me-2" src="~/images/conclude_active.png" />
                                </div>
                            </div>
                            CONCLUDE
                        </div>
                        <div class="mt-2">
                            <span class="h4 fw-bold">@Model.ConcludeRequest</span>
                        </div>
                    </div>
                </button>

            </div>

            <div class="col-lg-2 col-4 position-relative">
                <button type="submit" name="Status" value="3,7,8" class="btn text-start shadow-none w-100">
                    <div class="p-1 rounded toClose ps-2 pt-3 thumbnail a-toClose @{if(CV.CurrentStatus()=="3,7,8"){@Html.Raw("activeTab")}}">
                        <div class="d-inline-flex fw-bold">
                            <div class="d-none d-md-block">
                                <div class="img_1">
                                    <img class="requestTypeIcon d-flex align-self-center me-2" src="~/images/toclose.png" />
                                </div>
                                <div class="img_2">
                                    <img class="requestTypeIcon d-flex align-self-center me-2" src="~/images/toclose_active.png" />
                                </div>
                            </div>
                            TO CLOSE
                        </div>
                        <div class="mt-2">
                            <span class="h4 fw-bold">@Model.ToCloseRequest</span>
                        </div>
                    </div>
                </button>

            </div>

            <div class="col-lg-2 col-4 position-relative">
                <button type="submit" name="Status" value="9" class="btn text-start shadow-none w-100">
                    <div class="p-1 rounded unpaid ps-2 pt-3 thumbnail a-unpaid @{if(CV.CurrentStatus()=="9"){@Html.Raw("activeTab")}}">
                        <div class="d-inline-flex fw-bold">
                            <div class="d-none d-md-block">
                                <div class="img_1">
                                    <img class="requestTypeIcon d-flex align-self-center me-2" src="~/images/unpaid.png" />
                                </div>
                                <div class="img_2">
                                    <img class="requestTypeIcon d-flex align-self-center me-2" src="~/images/unpaid_active.png" />
                                </div>
                            </div>
                            UNPAID
                        </div>
                        <div class="mt-2">
                            <span class="h4 fw-bold">@Model.UnpaidRequest</span>
                        </div>
                    </div>
                </button>
            </div>
        </div>
        <!--End Status of requests-->

        <!--Important links-->
        <div class="d-flex justify-content-between mx-2">
            <div>
                <strong class="fs-6">Patients</strong> <small id="currentStatus"></small>
            </div>
            <div>
                <button class="btn btn-info text-white shadow-none mb-2">
                    <small>
                        <i class="bi bi-send"></i>
                        <span class="adminIcon">Send Link</span>
                    </small>
                </button>
                <button class="btn btn-info text-white shadow-none mb-2">
                    <small>
                        <i class="bi bi-file-earmark-plus"></i>
                        <span class="adminIcon">Create Requests</span>
                    </small>
                </button>
                <button class="btn btn-info text-white shadow-none mb-2">
                    <small>
                        <i class="fa-solid fa-share"></i>
                        <span class="adminIcon">Export</span>
                    </small>
                </button>
                <button class="btn btn-info text-white shadow-none mb-2">
                    <small>
                        <i class="fa-solid fa-share-from-square"></i>
                        <span class="adminIcon">Export All</span>
                    </small>
                </button>
                <button class="btn btn-info text-white shadow-none mb-2">
                    <small>
                        <i class="fa-solid fa-user-nurse"></i>
                        <span class="adminIcon">Request DIY Support</span>
                    </small>
                </button>
            </div>
        </div>
        <!--End Important links-->

        <!--Filters-->
        <div class="mt-2 mx-2 bg-white">
            <div class="searchBar px-2">
                <div class="py-2 row w-100" style="--bs-gutter-x:0rem;">
                    <div class="search col-lg-3 col-sm-6 col-xs-12 mb-1">
                        <div onclick="SearchSubmit()">
                            <i class="fa fa-search"></i>
                            <input asp-for="SearchInput" id="SearchInput" type="text" class="form-control" placeholder="Search Patients">
                        </div>
                    </div>
                    <div class="search col-lg-3 col-sm-6 col-xs-12 mb-1">
                        <div class="ms-1">
                            <i class="fa fa-search"></i>
                            <select asp-for="RegionId" asp-items="@(new SelectList(ViewBag.ComboBoxRegion, "RegionId", "RegionName"))" onchange="SearchSubmit()" class="form-select shadow-none text-secondary" id="floatingSelectGrid">
                                <option class="text-secondary w-100">All Regions</option>
                            </select>
                        </div>
                    </div>
                    <div class="requestType col-lg-6 col-sm-12 d-flex justify-content-end">
                        <div class="d-flex align-self-center t-filter">
                            <button type="submit" name="filter" value="1,2,3,4" class="btn me-2 shadow-none @{if(CV.Filter()=="1,2,3,4"){@Html.Raw("activeFilter")}}">
                                <small>All</small>
                            </button>
                            <button type="submit" name="filter" value="2" class="btn me-2 shadow-none @{if(CV.Filter()=="2"){@Html.Raw("activeFilter")}}">
                                <i class="fa-solid fa-circle fa-xs" style="color:#5fbc61;"></i>
                                <small>Patient</small>
                            </button>
                            <button type="submit" name="filter" value="3" class="btn me-2 shadow-none @{if(CV.Filter()=="3"){@Html.Raw("activeFilter")}}">
                                <i class="fa-solid fa-circle fa-xs" style="color:#ed9124;"></i>
                                <small>Family / Friend</small>
                            </button>
                            <button type="submit" name="filter" value="1" class="btn me-2 shadow-none @{if(CV.Filter()=="1"){@Html.Raw("activeFilter")}}">
                                <i class="fa-solid fa-circle fa-xs" style="color:#cd697b;"></i>
                                <small>Business</small>
                            </button>
                            <button type="submit" name="filter" value="4" class="btn me-2 shadow-none @{if(CV.Filter()=="4"){@Html.Raw("activeFilter")}}">
                                <i class="fa-solid fa-circle fa-xs" style="color:#0a7cb9;"></i>
                                <small>Concierge</small>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--End Filters-->
    </div>
</form>

<script>
    function SearchSubmit() {
        $('#filterForm').submit();
    }
</script>